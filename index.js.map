{"version":3,"file":"index.js","sources":["../src/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '54460001-4340b48267dd4c07393208eaa';\n\nexport async function fetchImages(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 40,\n    },\n  });\n\n  return response.data;\n}\n","import { fetchImages } from './pixabay-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loadingText = document.querySelector('.loading-text');\n\nlet page = 1;\nlet query = '';\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  query = e.target.elements[0].value.trim();\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n  loadingText.classList.remove('is-hidden');\n\n  fetchImages(query, page)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.info({\n          message: 'Sorry, no images found.',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      renderImages(data.hits);\n      lightbox.refresh();\n\n      if (data.totalHits > 20) {\n        loadMoreBtn.classList.remove('is-hidden');\n      }\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Something went wrong. Try again later.',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      loadingText.classList.add('is-hidden');\n    });\n}\n\nfunction onLoadMore() {\n  page += 1;\n\n  fetchImages(query, page)\n    .then(data => {\n      renderImages(data.hits);\n      lightbox.refresh();\n\n      if (gallery.children.length >= data.totalHits) {\n        loadMoreBtn.classList.add('is-hidden');\n        iziToast.info({\n          message: \"You've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    })\n    .catch(() => {\n      iziToast.error({\n        message: 'Error loading more images.',\n        position: 'topRight',\n      });\n    });\n}\n\nfunction renderImages(images) {\n  const markup = images\n    .map(\n      img => `\n      <a href=\"${img.largeImageURL}\" class=\"photo-card\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><b>Likes</b> ${img.likes}</p>\n          <p><b>Views</b> ${img.views}</p>\n          <p><b>Comments</b> ${img.comments}</p>\n          <p><b>Downloads</b> ${img.downloads}</p>\n        </div>\n      </a>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","axios","form","gallery","loadMoreBtn","loadingText","lightbox","SimpleLightbox","onSearch","onLoadMore","e","iziToast","data","renderImages","images","markup","img"],"mappings":"myBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAajD,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,GAEe,IAClB,CCbA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIL,EAAO,EACPD,EAAQ,GACRO,EAAW,IAAIC,EAAe,YAAY,EAE9CL,EAAK,iBAAiB,SAAUM,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,SAASD,EAASE,EAAG,CAInB,GAHAA,EAAE,eAAc,EAEhBX,EAAQW,EAAE,OAAO,SAAS,CAAC,EAAE,MAAM,OAC/B,CAACX,EAAO,CACVY,EAAS,QAAQ,CACf,QAAS,+BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDX,EAAO,EACPG,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,WAAW,EACrCC,EAAY,UAAU,OAAO,WAAW,EAExCP,EAAYC,EAAOC,CAAI,EACpB,KAAKY,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QAAS,0BACT,SAAU,UACpB,CAAS,EACD,MACD,CAEDE,EAAaD,EAAK,IAAI,EACtBN,EAAS,QAAO,EAEZM,EAAK,UAAY,IACnBR,EAAY,UAAU,OAAO,WAAW,CAEhD,CAAK,EACA,MAAM,IAAM,CACXO,EAAS,MAAM,CACb,QAAS,yCACT,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbN,EAAY,UAAU,IAAI,WAAW,CAC3C,CAAK,CACL,CAEA,SAASI,GAAa,CACpBT,GAAQ,EAERF,EAAYC,EAAOC,CAAI,EACpB,KAAKY,GAAQ,CACZC,EAAaD,EAAK,IAAI,EACtBN,EAAS,QAAO,EAEZH,EAAQ,SAAS,QAAUS,EAAK,YAClCR,EAAY,UAAU,IAAI,WAAW,EACrCO,EAAS,KAAK,CACZ,QAAS,4CACT,SAAU,UACpB,CAAS,EAET,CAAK,EACA,MAAM,IAAM,CACXA,EAAS,MAAM,CACb,QAAS,6BACT,SAAU,UAClB,CAAO,CACP,CAAK,CACL,CAEA,SAASE,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EACZ,IACCE,GAAO;AAAA,iBACIA,EAAI,aAAa;AAAA,oBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,4BAE1BA,EAAI,KAAK;AAAA,4BACTA,EAAI,KAAK;AAAA,+BACNA,EAAI,QAAQ;AAAA,gCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,KAIxC,EACA,KAAK,EAAE,EAEVb,EAAQ,mBAAmB,YAAaY,CAAM,CAChD"}